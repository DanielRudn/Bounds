package com.dr.bounds.screens;

import java.util.ArrayList;

import com.DR.dLib.ui.dScreen;
import com.DR.dLib.ui.dUICard;
import com.DR.dLib.ui.dUICardList;
import com.badlogic.gdx.Net.HttpResponse;
import com.badlogic.gdx.Net.HttpResponseListener;
import com.badlogic.gdx.graphics.Texture;
import com.dr.bounds.ui.ShopItemCard;

public class ShopScreen extends dUICardList implements HttpResponseListener{

	// Holds 2 ShopItemCards 
	private static ArrayList<dUICard> itemCardContainers = new ArrayList<dUICard>();
	private Texture cardTexture;
	// String for shop file
	private final String url ="https://docs.google.com/document/d/1fapoD_xnTPEAYMpJUGr9zWHy1vKzDvybvoDcWkcHQOU/edit?usp=sharing";

	public ShopScreen(float x, float y, Texture texture) {
		super(x, y, texture, itemCardContainers);
		cardTexture = texture;
		loadItemsFromBackend();
		//this.setTitleCard(null);
	}
	
	private void loadItemsFromBackend()
	{
		
		request = new HttpRequest(HttpMethods.GET);
		request.setUrl(url);
		request.setHeader("User-Agent", "Mozilla/5.0 (X11; Linux x86_64; rv:12.0) Gecko/20100101 Firefox/21.0");
		Gdx.net.sendHttpRequest(request, this);
		dUICard currentContainer = null;
		ShopItemCard itemCard = null;
		for(int x = 0; x < 20; x++)
		{
			itemCard = new ShopItemCard(0,0,cardTexture,"Canadian Flag", x+1, (byte)x);
			if(x%2 == 0)
			{
				currentContainer = new dUICard(0,0,cardTexture);
				currentContainer.setDimensions(getWidth() - 256f, 222f);
				currentContainer.setHasShadow(false);
				currentContainer.setAlpha(0);
				//currentContainer.setColor(Color.RED);
				addCardAsObject(currentContainer);
			//	itemCardContainers.add(currentContainer);
				currentContainer.addObject(itemCard, dUICard.LEFT, dUICard.CENTER);
			}
			else
			{
				currentContainer.addObject(itemCard, dUICard.RIGHT, dUICard.CENTER);
			}
		}
	}

	@Override
	public void goBack() {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void switchScreen(dScreen arg0) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void handleHttpResponse(HttpResponse httpResponse) {

	}

	@Override
	public void failed(Throwable t) {

	}

	@Override
	public void cancelled() {

	}

}
